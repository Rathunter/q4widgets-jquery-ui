/*! Compiled on 2015-01-08 */
!function(a){a.widget("q4.treemenu",{options:{openMultipleItems:!1,menuContainer:".menu",bodyContainer:".body",submenu:".submenu",trigger:".itemLink",expandTrigger:".itemExpand",expandText:"[ + ]",collapseText:"[ - ]",itemClass:"treemenu-item",activeClass:"treemenu-active",expandedClass:"treemenu-expanded",template:'<ul class="menu"></ul><div class="body"></div>',menuItemTemplate:'<li><span class="itemExpand"></span><a class="itemLink" href="#">{{title}}</a><ul class="submenu"></ul></li>',bodyItemTemplate:'<div><h4>{{title}}</h4><div class="itemContent">{{{content}}}</div></div>',content:[{title:"Item 1",content:"Item 1 content",items:[{title:"Item 1.1",content:"Item 1.1 content"}]}]},_create:function(){this._drawMenu(),this._bindEvents()},_drawMenu:function(){var b=this,c=this.options,d=this.element;d.append(c.template),a.each(c.content,function(e,f){a(c.menuContainer,d).append(b._renderItem(f))})},_renderItem:function(b){var c=this,d=this.options,e=a(Mustache.render(d.menuItemTemplate,b)).addClass(d.itemClass),f=a(d.submenu,e).hide(),g=a(d.expandTrigger,e).hide();return e.data("tplData",{title:b.title,content:b.content}),a.isArray(b.items)&&b.items.length&&(a.each(b.items,function(a,b){f.append(c._renderItem(b))}),g.show().html(d.expandText)),e},_bindEvents:function(){var b=this.options,c=this.element;this._on(a(b.trigger,c),{click:function(d){d.preventDefault();var e=a(d.target).closest("."+b.itemClass);a("."+b.itemClass,c).removeClass(b.activeClass),e.addClass(b.activeClass),a(b.bodyContainer,c).html(Mustache.render(b.bodyItemTemplate,e.data("tplData")))}}),this._on(a(b.expandTrigger,c),{click:function(c){function d(c){return a(b.submenu,c).filter(function(){return a(this).closest("."+b.itemClass).is(c)})}c.preventDefault();var e=a(c.target).closest("."+b.itemClass);e.toggleClass(b.expandedClass);var f=e.hasClass(b.expandedClass);a(c.target).html(f?b.collapseText:b.expandText),d(e).slideToggle(f),!b.openMultipleItems&&f&&e.siblings().each(function(){d(a(this)).slideUp()})}})}})}(jQuery);