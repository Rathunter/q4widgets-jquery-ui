/* Widget: q4.rssfeed */
/* Version: 1.0.0 */
/* Compiled on 2015-01-14 */
!function(a){a.widget("q4.rssfeed",{options:{url:"",limit:0,dateFormat:"MMM D, YYYY h:mm A",summaryLength:500,template:'<header><h1><a href="{{url}}" target="_blank">{{title}}</a></h1><p>Last updated: {{date}}</p></header>{{#items}}<article><header><h2><a href="{{url}}" target="_blank">{{{title}}}</a></h2><p>{{date}}</p></header>{{{body}}}</article>{{/items}}',complete:function(){}},_renderFeed:function(){var b=this,c=this.options,d=this.element;a.get(c.url,function(e){var f=a(e).find("channel"),g={title:f.children("title").text(),url:f.children("link").text(),date:moment(f.children("lastBuildDate").text(),"DD MMM YYYY hh:mm:ss").format(c.dateFormat),items:[]};a.each(f.children("item"),function(b,d){if(c.limit>0&&b==c.limit)return!1;var e=a(d),f=a.trim(e.children("description").text()),h=a.trim(a("<div>").html(f).text().replace(/\/*<!\[CDATA\[[\s\S]*?\]\]>\/*/g,""));g.items.push({title:e.children("title").text(),url:e.children("link").text(),date:moment(e.children("pubDate").text(),"DD MMM YYYY hh:mm:ss").format(c.dateFormat),body:f,summary:h.slice(0,c.summaryLength),firstLine:h.split("\n")[0]})}),d.append(Mustache.render(c.template,g)),b._trigger("complete")})},_create:function(){this._renderFeed()}})}(jQuery);