/* Widget: q4.pager */
/* Version: 1.0.0 */
/* Compiled on 2015-01-14 */
!function(a){a.widget("q4.pager",{options:{count:95,perPage:1,pages:[],startPage:1,showFirstLast:!0,showPrevNext:!0,trigger:"> *",template:"<span>{{page}}</span>",labels:{first:"«",prev:"<",next:">",last:"»"},beforeChange:function(){},afterChange:function(){}},pages:[],currentPage:null,changePage:function(a){var b=(this.options,{page:a,prevPage:this.currentPage});this._trigger("beforeChange",e,b),this.setPage(a),this._trigger("afterChange",e,b)},_create:function(){this._bindEvents()},_init:function(){this._drawPager()},_bindEvents:function(){var b={};b["click "+this.options.trigger]=function(b){a(b.target).hasClass("pager-disabled")||a(b.target).hasClass("pager-active")||this.changePage(a(b.target).data("page"),b)},this._on(b)},_drawPager:function(){var b,c=this.options,d=this.element,e=null;if(a.isArray(c.pages)&&c.pages.length)this.pages=c.pages,b=this.pages.length,c.startPage&&a.inArray(c.startPage,this.pages)>-1&&(e=c.startPage);else{b=Math.ceil(c.count/(c.perPage?c.perPage:1)),this.pages=[];for(var f=1;b>=f;f++)this.pages.push(f);c.startPage&&(e=Math.max(1,Math.min(b+1,c.startPage)))}c.showFirstLast&&a(Mustache.render(c.template,{page:c.labels.first})).addClass("pager-first").data("page",1).appendTo(d),c.showPrevNext&&a(Mustache.render(c.template,{page:c.labels.prev})).addClass("pager-prev pager-disabled").appendTo(d),a.each(this.pages,function(b,e){a(Mustache.render(c.template,{page:e})).addClass("pager-page").data("page",e).appendTo(d)}),c.showPrevNext&&a(Mustache.render(c.template,{page:c.labels.next})).addClass("pager-next pager-disabled").appendTo(d),c.showFirstLast&&a(Mustache.render(c.template,{page:c.labels.last})).addClass("pager-last").data("page",b).appendTo(d),1==b&&a(".pager-page",d).addClass("pager-disabled"),null!==e&&this._setPage(e)},_setPage:function(b){{var c=this.element;this.options}if(-1!=a.inArray(b,this.pages)){var d=a.inArray(b,this.pages),e=this.pages.length-1;a(".pager-first, .pager-prev",c).toggleClass("pager-disabled",0==d),a(".pager-last, .pager-next",c).toggleClass("pager-disabled",d==e),a(".pager-prev",c).data("page",d>0?this.pages[d-1]:""),a(".pager-next",c).data("page",e>d?this.pages[d+1]:""),a(".pager-page",c).removeClass("pager-active").filter(function(){return a(this).data("page")==b}).addClass("pager-active"),this.currentPage=b}}})}(jQuery);